"use strict";(self.webpackChunktypescript_eslint_chinese=self.webpackChunktypescript_eslint_chinese||[]).push([[5061],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=i.createContext({}),s=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return i.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return n?i.createElement(f,l(l({ref:t},c),{},{components:n})):i.createElement(f,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var a={};for(var p in t)hasOwnProperty.call(t,p)&&(a[p]=t[p]);a.originalType=e,a.mdxType="string"==typeof e?e:r,l[1]=a;for(var s=2;s<o;s++)l[s]=n[s];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4496:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return a},metadata:function(){return s},toc:function(){return u}});var i=n(3117),r=n(102),o=(n(7294),n(3905)),l=["components"],a={id:"type-linting",title:"\u5e26\u7c7b\u578b\u4fe1\u606f\u7684\u68c0\u6d4b",sidebar_label:"Linting with Type Information"},p=void 0,s={unversionedId:"linting/type-linting",id:"linting/type-linting",title:"\u5e26\u7c7b\u578b\u4fe1\u606f\u7684\u68c0\u6d4b",description:"\u5728\u5e55\u540e\uff0c typescript-eslint \u89e3\u6790\u5668\u4f7f\u7528\u4e86 TypeScript \u7684\u7f16\u8bd1\u5668 API \u53bb\u89e3\u6790\u6587\u4ef6\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u63d0\u4f9b\u68c0\u67e5(lint)\u89c4\u5219\u6765\u8bbf\u95ee TypeScript \u6240\u77e5\u9053\u4f60\u7684\u4ee3\u7801\u5e93\u4e2d\u6240\u6709\u7684\u7c7b\u578b\u4fe1\u606f\u3002",source:"@site/docs/linting/TYPED_LINTING.md",sourceDirName:"linting",slug:"/linting/type-linting",permalink:"/typescript-eslint-chinese/docs/linting/type-linting",draft:!1,tags:[],version:"current",lastUpdatedBy:"GEARLESS JOE",lastUpdatedAt:1657247748,formattedLastUpdatedAt:"2022\u5e747\u67088\u65e5",frontMatter:{id:"type-linting",title:"\u5e26\u7c7b\u578b\u4fe1\u606f\u7684\u68c0\u6d4b",sidebar_label:"Linting with Type Information"},sidebar:"docs",previous:{title:"Linting your TypeScript Codebase",permalink:"/typescript-eslint-chinese/docs/linting/"},next:{title:"Configurations",permalink:"/typescript-eslint-chinese/docs/linting/configs"}},c={},u=[{value:"FAQs",id:"faqs",level:2},{value:"\u6027\u80fd\u5982\u4f55\uff1f",id:"\u6027\u80fd\u5982\u4f55",level:3},{value:"I get errors telling me &quot;The file must be included in at least one of the projects provided&quot;",id:"i-get-errors-telling-me-the-file-must-be-included-in-at-least-one-of-the-projects-provided",level:3},{value:"\u7591\u96be\u89e3\u7b54",id:"\u7591\u96be\u89e3\u7b54",level:2}],d={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u5728\u5e55\u540e\uff0c typescript-eslint \u89e3\u6790\u5668\u4f7f\u7528\u4e86 TypeScript \u7684\u7f16\u8bd1\u5668 API \u53bb\u89e3\u6790\u6587\u4ef6\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u63d0\u4f9b\u68c0\u67e5(lint)\u89c4\u5219\u6765\u8bbf\u95ee TypeScript \u6240\u77e5\u9053\u4f60\u7684\u4ee3\u7801\u5e93\u4e2d\u6240\u6709\u7684\u7c7b\u578b\u4fe1\u606f\u3002"),(0,o.kt)("p",null,"\u5145\u5206\u5229\u7528 TypeScript \u989d\u5916\u7684\u529f\u80fd\u524d\uff0c\u4f60\u9700\u8981\u5bf9\u4f60\u7684\u914d\u7f6e\u8fdb\u884c\u4e24\u4e2a\u5c0f\u7684\u66f4\u6539\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title=".eslintrc.js"',title:'".eslintrc.js"'},'module.exports = {\n  root: true,\n  parser: "@typescript-eslint/parser",\n  // \u4ece\u8fd9\u884c\u5f00\u59cb\u52a0\n  parserOptions: {\n    tsconfigRootDir: __dirname,\n    project: ["./tsconfig.json"],\n  },\n  // \u5230\u8fd9\u884c\u7ed3\u675f\n  plugins: ["@typescript-eslint"],\n  extends: [\n    "eslint:recommended",\n    "plugin:@typescript-eslint/recommended",\n    // \u6dfb\u52a0\u4e0b\u9762\u8fd9\u884c\n    "plugin:@typescript-eslint/recommended-requiring-type-checking",\n  ],\n};\n')),(0,o.kt)("p",null,"\u8be6\u89e3:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"parserOptions.tsconfigRootDir")," \u544a\u8bc9\u89e3\u6790\u5668\u9879\u76ee\u6839\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"parserOptions.project")," \u544a\u8bc9\u89e3\u6790\u5668\u9879\u76ee\u4e2d\u7684",(0,o.kt)("inlineCode",{parentName:"li"},"tsconfig.json"),"\u7684\u76f8\u5bf9\u8def\u5f84(\u76f8\u5bf9\u4e8e",(0,o.kt)("inlineCode",{parentName:"li"},"parserOptions.tsconfigRootDir"),")\u3002",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f60\u7684\u9879\u76ee\u662f\u591a\u9879\u76ee\u5305\u7684 monorepo \u8bf7\u770b ",(0,o.kt)("a",{parentName:"li",href:"/typescript-eslint-chinese/docs/linting/monorepo"},"\u6211\u4eec\u7684\u6587\u6863\u6709\u5173 monorepo \u7684\u914d\u7f6e "),"."))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"plugin:@typescript-eslint/recommended-requiring-type-checking")," \u662f\u6211\u4eec\u63a8\u8350\u7684\u53e6\u4e00\u4e2a\u914d\u7f6e\u3002\u5b83\u5305\u542b\u660e\u786e\u5fc5\u8981\u7684\u7c7b\u578b\u4fe1\u606f\u89c4\u5219\u3002")),(0,o.kt)("p",null,"\u5b8c\u6210\u540e\uff0c\u8fd0\u884c\u4e0e\u4e4b\u524d\u76f8\u540c\u7684 lint \u547d\u4ee4\u3002"),(0,o.kt)("p",null,"\u4f60\u5c06\u770b\u5230\u62a5\u544a\u9519\u8bef\u57fa\u4e8e\u7c7b\u578b\u4fe1\u606f\u7684\u65b0\u89c4\u5219\uff01"),(0,o.kt)("h2",{id:"faqs"},"FAQs"),(0,o.kt)("h3",{id:"\u6027\u80fd\u5982\u4f55"},"\u6027\u80fd\u5982\u4f55\uff1f"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"But wait")," - I hear you exclaim - ",(0,o.kt)("em",{parentName:"p"},"why would you ever not want type-aware rules?")),(0,o.kt)("p",null,"\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898(\u4e3a\u4e86\u5145\u5206\u516c\u5f00)\u3002\u5728\u4f60\u7684\u914d\u7f6e\u4e2d\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"parserOptions.project"),"\uff0c\u672c\u8d28\u4e0a\u662f\u8ba9 TypeScript \u5728 ESLint \u8fdb\u884c\u68c0\u6d4b\uff08linting\uff09\u4e4b\u524d\u6784\u5efa\u9879\u76ee\u3002\u5bf9\u4e8e\u5c0f\u7684\u9879\u76ee\u6765\u8bf4\u8fd9\u53ea\u9700\u8981\u5f88\u5c11\u7684\u65f6\u95f4\uff08\u51e0\u79d2\u949f\uff09\u3002\u5bf9\u4e8e\u5927\u578b\u9879\u76ee\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u957f\u65f6\u95f4\uff0830 \u79d2\u6216\u66f4\u591a\uff09\u3002\n\u6211\u4eec\u5927\u591a\u6570\u7684\u7528\u6237\u90fd\u611f\u5230\u5f88\u6ee1\u610f\uff0c\u4ed6\u4eec\u8ba4\u4e3a\u5f3a\u5927\u7684\u9759\u6001\u7c7b\u578b\u611f\u77e5\u5206\u6790\u662f\u503c\u5f97\u7684\u3002"),(0,o.kt)("p",null,"Additionally, most users primarily consume lint errors via IDE plugins which, through some caching magic, do not suffer the same penalties.\u8fd9\u610f\u5473\u7740\u4ed6\u4eec\u901a\u5e38\u4ec5\u662f\u5728\u63a8\u9001\u4e4b\u524d\u8fd0\u884c\u5b8c\u6574\u7684\u68c0\u6d4b(lint)\uff0c\u6216\u8005\u901a\u8fc7\u4ed6\u4eec\u7684 CI\uff0c\u5728\u90a3\u91cc\u989d\u5916\u7684\u65f6\u95f4\u771f\u7684\u4e0d\u91cd\u8981\u3002"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u4f60\u4f7f\u7528\u7c7b\u578b\u611f\u77e5\u68c0\u6d4b(type-aware linting)"),", but the above information is included so that you can make your own, informed decision."),(0,o.kt)("h3",{id:"i-get-errors-telling-me-the-file-must-be-included-in-at-least-one-of-the-projects-provided"},'I get errors telling me "The file must be included in at least one of the projects provided"'),(0,o.kt)("p",null,"This error means that the file that's being linted is not included in any of the tsconfig files you provided us.\nA lot of the time this happens when users have test files or similar that are not included in their normal tsconfigs."),(0,o.kt)("p",null,"Depending on what you want to achieve:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"If you ",(0,o.kt)("strong",{parentName:"li"},"do not")," want to lint the file:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Use ",(0,o.kt)("a",{parentName:"li",href:"https://eslint.org/docs/user-guide/configuring#ignoring-files-and-directories"},"one of the options ESLint offers")," to ignore files, like a ",(0,o.kt)("inlineCode",{parentName:"li"},".eslintignore")," file, or ",(0,o.kt)("inlineCode",{parentName:"li"},"ignorePatterns")," config."))),(0,o.kt)("li",{parentName:"ul"},"If you ",(0,o.kt)("strong",{parentName:"li"},"do")," want to lint the file:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"If you ",(0,o.kt)("strong",{parentName:"li"},"do not")," want to lint the file with ",(0,o.kt)("a",{parentName:"li",href:"/typescript-eslint-chinese/docs/linting/type-linting"},"type-aware linting"),":",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Use ",(0,o.kt)("a",{parentName:"li",href:"https://eslint.org/docs/user-guide/configuring#configuration-based-on-glob-patterns"},"ESLint's ",(0,o.kt)("inlineCode",{parentName:"a"},"overrides")," configuration")," to configure the file to not be parsed with type information.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"A popular setup is to omit the above additions from top-level configuration and only apply them to TypeScript files via an override."),(0,o.kt)("li",{parentName:"ul"},"Alternatively, you can add ",(0,o.kt)("inlineCode",{parentName:"li"},"parserOptions: { project: null }")," to an override for the files you wish to exclude. Note that ",(0,o.kt)("inlineCode",{parentName:"li"},"{ project: undefined }")," will not work."))))),(0,o.kt)("li",{parentName:"ul"},"If you ",(0,o.kt)("strong",{parentName:"li"},"do")," want to lint the file with ",(0,o.kt)("a",{parentName:"li",href:"/typescript-eslint-chinese/docs/linting/type-linting"},"type-aware linting"),":",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Check the ",(0,o.kt)("inlineCode",{parentName:"li"},"include")," option of each of the tsconfigs that you provide to ",(0,o.kt)("inlineCode",{parentName:"li"},"parserOptions.project")," - you must ensure that all files match an ",(0,o.kt)("inlineCode",{parentName:"li"},"include")," glob, or else our tooling will not be able to find it."),(0,o.kt)("li",{parentName:"ul"},"If your file shouldn't be a part of one of your existing tsconfigs (for example, it is a script/tool local to the repo), then consider creating a new tsconfig (we advise calling it ",(0,o.kt)("inlineCode",{parentName:"li"},"tsconfig.eslint.json"),") in your project root which lists this file in its ",(0,o.kt)("inlineCode",{parentName:"li"},"include"),". For an example of this, you can check out the configuration we use in this repo:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/typescript-eslint/typescript-eslint/blob/main/tsconfig.eslint.json"},(0,o.kt)("inlineCode",{parentName:"a"},"tsconfig.eslint.json"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/typescript-eslint/typescript-eslint/blob/main/.eslintrc.js"},(0,o.kt)("inlineCode",{parentName:"a"},".eslintrc.js")))))))))),(0,o.kt)("h2",{id:"\u7591\u96be\u89e3\u7b54"},"\u7591\u96be\u89e3\u7b54"),(0,o.kt)("p",null,"\u5982\u679c\u5728\u8fd9\u65b9\u9762\u6709\u95ee\u9898\uff0c\u8bf7\u67e5\u770b\u6211\u4eec\u7684",(0,o.kt)("a",{parentName:"p",href:"/typescript-eslint-chinese/docs/linting/troubleshooting"},"\u7591\u96be\u89e3\u7b54\u548c FAQ"),"\u3002"))}m.isMDXComponent=!0}}]);